{"pages":[{"title":"categories","text":"","link":"/categories/index.html"},{"title":"links","text":"","link":"/links/index.html"},{"title":"about","text":"","link":"/about/index.html"},{"title":"tags","text":"","link":"/tags/index.html"}],"posts":[{"title":"MySQL自测题目","text":"整理了一些 SQL 语法的自测题目，包括基础的 ddl 操作，以及分组统计、递归、窗口函数等进阶操作。某些语法可能 MySQL 不支持。 MySQL 常见语法自测题目新建库和表 新建数据库 mydb（可选） 查看数据库版本、时区、字符集等，了解如何修改时区、字符集等 给出SQL：如果 client 表存在则删除该表 新建客户信息表 client，包含以下字段并给对应字段设置相应长度，并设置存储引擎为 InnoDB，字符集为 utf8mb4 字段名 字段类型 注释 默认值 id varchar id client_no varchar 客户号 client_name varchar 客户姓名 sex char 性别(F:男性, M:女性, U:保密) birthday date 出生日期 is_validate char 有效标识(Y:有效,N:无效) note text 其他说明 stand_by text 预留备用字段 新建保单信息表 pol，包含以下字段并给对应字段设置相应长度，并设置存储引擎为 InnoDB，字符集为 utf8mb4 字段名 字段类型 注释 id varchar id pol_no varchar 保单号 client_no int 客户号 app_date datetime 投保时间 payment_period char 缴费周期(M:月缴,Y:年缴,O:一次交清) payment_amount decimal 期缴保费 新建用户、修改用户密码、表权限控制等略，自行了解。 常见数据库操作（DDL） 按照建表规范，给 client 表和 pol 表的表明增加统一前缀 按照建表规范，给 client 表和 pol 表增加以下4列 created_time 数据创建时间，字段类型时间戳，默认值为数据插入表中的时间 created_by 数据创建人，默认值为 “unknown” updated_time 数据更新时间，字段类型为时间戳，默认为当前时间，每次更新数据时要自动更新该字段为当前时间 updated_by 数据更新人，默认值为 “unknown” 在 client 表 birthday 字段后新增手机号字段 phone_number 修改 pol 表的 client_no 字段类型，与 client 表中的字段类型保持一致 将两个表的 id 字段修改为 int 自增，并设置为主键 给 client 表的 client_no 字段增加唯一键约束，给 pol 表的 pol_no 字段增加唯一键约束 给 client 表的 client_name 字段添加索引，给 pol 表的 client_no 字段添加索引，索引名称以 idx_表名_字段名命名 删除 client 表的 stand_by 字段 常见数据操作（DML） 使用 truncate 命令清空 client 表和 pol 表，了解 truncate 和 delete 命令的区别 向 client 表中写入如下数据 客户号 客户姓名 性别 出生日期 是否有效 其他说明 C01 丁一 F 1990-01-19 Y C02 王二 M 2002-11-28 Y C03 王三 F 1976-09-15 Y C04 李四 F 1999-04-02 Y C05 李五 M 2004-08-10 Y C06 老六 M 1980-09-09 Y 向 pol 表中写入以下数据 保单号 客户号 投保日期 缴费频次 期缴保费 P001 C02 2005-01-01 Y 100.00 P002 C05 2020-09-10 M 200.00 P003 C01 1999-08-10 Y 300.00 P004 C02 2021-08-18 O 400.00 P005 C04 2008-03-08 M 500.00 P006 C04 2020-05-02 M 600.00 P007 C05 2023-01-29 M 700.00 P008 C03 1990-06-18 M 800.00 P009 C02 2010-01-01 Y 900.00 P010 C02 2018-11-01 M 1000.00 将不存在保单的客户状态更新为失效，其他说明更新为：无保单 删除失效客户 常见分组统计 查出姓“王”的客户 查出名字中包含“李”字的客户 查出名字以“一”结尾的客户 以姓名第一个字为姓氏，查出每个姓氏对应的客户数量 查询年龄在30以内的客户并按出生日期倒序排序 在一个SQL中查出每个性别对应的客户群体的人数、最小年龄、最大年龄、平均年龄。 出生日期在1990年前的客户定义为“客户群1”，1990年-2000年之间的定义为“客户群2”，2000年以后的定义为“客户群3”，查出各个客户群的客户数量，展示字段如下： 客户群名称 客户数量 查出所有客户名下满足以下条件的保单信息： 投保日期在2000年以后且缴费频次为月缴 投保日期在2000年以前且缴费频次为年缴 期缴保费在 300 元以上 展示以下字段： 客户号 客户姓名 保单号 投保日期 缴费频次 期缴保费 缴费频次需展示为对应的注释，投保日期展示格式 yyyy年M月d日 查出缴费频次为月缴的保单数量 查出8年前投保过保单的客户数量 查出投保过3个及3个以上保单的客户 查出每个客户每个保单至今的缴费总额 查出每个客户每年投保的前两个保单，并根据客户号升序、投保日期降序排序 了解 MySQL 数据类型转换（字符串转数字、字符串转日期等） 视图创建视图 vw_vip_client，视图中的客户信息为投保过3个及3个以上保单的客户，字段如下： 客户号 客户姓名 性别 出生日期 投保的保单数量 了解视图的原理、性能等。 常用函数 字符串拼接 字符串大小写转换 字符串截取 数学计算 数据类型转换 去除空白字符 日期计算 日期格式化 其他进阶主题 递归查询（常用且实用） 正则表达式 数据备份及恢复 SQL 注入及防注入 分析 SQL 执行计划 常见的 SQL 性能优化","link":"/2024/01/13/MySQL%E8%87%AA%E6%B5%8B%E9%A2%98%E7%9B%AE/"}],"tags":[{"name":"数据库","slug":"数据库","link":"/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"}],"categories":[{"name":"数据库","slug":"数据库","link":"/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"}]}